<!--
  ~ Copyright (c) 2010 Nimbits Inc.
  ~
  ~ http://www.nimbits.com
  ~
  ~
  ~ Licensed under the GNU GENERAL PUBLIC LICENSE, Version 3.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
  ~
  ~ http://www.gnu.org/licenses/gpl.html
  ~
  ~ Unless required by applicable law or agreed to in writing, software distributed under the license is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, eitherexpress or implied. See the License for the specific language governing permissions and limitations under the License.
  -->

<h2>Current Value</h2>
<p>
    <a href="#" onclick="getContent('pages/web_service_primer.html')">Please read the web service primer</A> to
    understand how to provide proper authentication parameters.
    For simplicity, authentication parameters are not shown here.

</p>
<p><strong>com.nimbits.server.service.CurrentValueService</strong></p>

<h3>Description</h3>
<p>Records new values and/or returns the last recorded value to a given point.</p>

<h3>GET</h3>
<h4>Parmeters</h4>
<ul>
    <li>point - case sensitive name of the data point</li>
    <li>uuid - optional - unique identifier of a data point can be provided instead of a name</li>
    <li>format -
        optional - provide the value double for a plane numeric value without any formatting. Provide json for json
        response that includes text, gps, double values. By default this service returns the simple numeric value.
        As an added convenience, you can record a value using a GET on this service, it will obviously return that newly
        recorded value. The following parameters can be provided to record data to the give point.
    </li>
    <li>value optional - a numeric value i.e. 3.14</li>
    <li>json - optional - a complete json <a href="#" onclick="getContent('/pages/server_docs/value_objects.html')">Value Object</a>.</li>
    <li>note - optional - text data for this recorded value</li>
    <li>lat optional - a GPS latitude coordinate.</li>
    <li>lng optional - a GPS longitude coordinate</li>
    <li>data - xml, json or any other data format.</li>
</ul>

<h4>Sample</h4>

<pre>http://app.nimbits.com/service/currentvalue?point=test&email=example@gmail.com&format=json</pre>

<p>Returns a JSON formated <a href="#" onclick="getContent('/pages/server_docs/value_objects.html')">Value Object</a>.</p>
<pre class="prettyprint">
{"id":2644002,"lat":0.0,"lng":0.0,"d":104.0,"timestamp":"Oct 29, 2010 9:48:28 PM","pointFK":1929017}
</pre>

<p>Remove the format parameter for a current value:</p>
<pre>
http://app.nimbits.com/service/currentvalue?point=test&email=example@gmail.com
</pre>
<p>Returns the number value. The is useful for importing current values into excel.</p>
<pre>
    104.0
</pre>

<h3>POST</h3>
<ul>
    <li>value -
        optional - a numeric value i.e. 3.14
    </li>
    <li>json -
        optional - a complete json <a href="#" onclick="getContent('/pages/server_docs/value_objects.html')">Value Object</a>.
    </li>
    <li>note -
        optional - text data for this recorded value
    </li>
    <li>lat -
        optional - a GPS latitude coordinate.
    </li>
    <li>lng -
        optional - a GPS longitude coordinate
    </li>
    <li>point -
        case sensitive name of the data point
    </li>
    <li>timestamp -
        optional - the timestamp associated with this newly recorded value in long unix epoch time format.
    </li>
</ul>

<script type="text/javascript" src="/include/rawfile.js">  </script>