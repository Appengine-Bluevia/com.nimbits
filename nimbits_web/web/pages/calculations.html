<!--
  ~ Copyright (c) 2013 Nimbits Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either expressed or implied.  See the License for the specific language governing permissions and limitations under the License.
  -->
<script type="text/javascript" src="/include/rawfile.js">  </script>
<h4 style="margin: 10px">Calculation Services</h4>


<span class="row">

 <span class="span6">

<p>
    When a DataPoint is written to with a new value, the event of recording a value can trigger a calculation.
    You can have multiple calculations triggered when a point receives a new value and when the resulting value of
    your formula is then stored in a target point. That in turn can trigger other events such as another calc, alerts etc.
</p>
     <p>
         Calculations are validated by the server when saves, and are disabled if such things as infinite loops are detected.
         you can have calcs, intelligence queries, summaries and so on cascade up to 10 steps before the server considers it a possible
         infinite loop and rejects it.

     </p>


<p>
    The formulas basic arithmetic will be executed and the resulting value will be recorded into the target point â€“ all
    compression, alerts and other functionality will then be applied to the new value as if it was a newly recorded
    value.
</p>
<p>
    A DataPoint can be a trigger, parameter or target for a formula.
</p>
<p>
    If a point is a trigger and a new value is written to it the formula assigned to that data point will be executed.
</p>
<p>
    After the formula executes successfully, the resulting double value is stored in the target point and all Record
    Value settings are processed (Such as Alerts, Compression etc)
</p>

<h3>Example</h3>
<p>
    To setup a calculation you need to create at least two DataPoint channels in Nimbits. A <strong>trigger</strong> point
    will trigger the calculation to be processed and the <strong>target</strong> point receives the result of the
    calculation. You can also setup up to three parameter points. They will have their current values inserted into the
    calculation at variables x, y and z. Typically, the trigger point is also the x variable, causing the current value
    of the trigger (the newly recorded value) to be inserted into a formula and recorded to the target point.
</p>

<p>
    After creating your data points right click on the trigger point. You do not
    have to do anything to the target point. Select <strong>Calculation</strong> from the menu.
</P>

<p>
    Here, you can select the target point and points that should be the x, y and z values in the formula if you need
    them. Again, typically the target point is used as an x variable in the formula.  Nimbits will replace the x, y and z
    with the current value of the corresponding point's.
</p>
<p>
    Enter a formula, ensuring the x, y and z are lower case. Click test to ensure everything is working.
</p>
<p>
    Supported symbols are: , +, -, , /, ^, %, cos, sin, tan, acos, asin, atan, sqrt, sqr, log
    abs, neg

    x + y | add the points stored in the x and y settings together and recorded the result in the target
    sqrt(x) | Take the square root of x and store in the target.

</p>
 </span>
    <span class="span4">
        <img style="margin: 5px" src="/images/screens/calc.png" alt="">
        <BR>
          <img style="margin: 5px" src="/images/screens/calc_settings.png" alt="">

        </span>

    </span>